<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Data Import and Exploration</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}

.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">The [Bi]Cycles of Life</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">home</a>
</li>
<li>
  <a href="about.html">about</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    project
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_import.html">data import + exploration</a>
    </li>
    <li>
      <a href="analysis.html">analysis + findings</a>
    </li>
    <li>
      <a href="visualizations.html">visualizations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    contact
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:edm2152@cumc.columbia.edu">
        <span class="fa fa-envelope"></span>
         
        Eric Morris
      </a>
    </li>
    <li>
      <a href="mailto:gsl2116@cumc.columbia.edu">
        <span class="fa fa-envelope"></span>
         
        Grace Liu
      </a>
    </li>
    <li>
      <a href="mailto:tm2680@cumc.columbia.edu">
        <span class="fa fa-envelope"></span>
         
        Tatini Mal-Sakar
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="https://www.youtube.com">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ericdavidmorris/final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://citibikenyc.com">
    <span class="fa fa-bicycle fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data Import and Exploration</h1>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Data for this project was obtained from <a href="https://s3.amazonaws.com/tripdata/index.html">the company’s system data website</a>, which is provided according to the <a href="https://www.citibikenyc.com/data-sharing-policy">NYCBS Data Use Policy</a>. We downloaded CSV zip files of Citi Bike data for the corresponding months of interest in 2017.</p>
<hr />
</div>
<div id="data-import" class="section level2">
<h2>Data Import</h2>
<p>Originally, we felt it was better to download directly from the data source for reproducibility purposes, however, when using read_csv with the direct URL to the zip, there were several parsing errors and the import failed. This may be due to the size of the files (zips vary from 25-70 MB). As such, we decided to download the zips of two months of interest and add them to our project’s data folder and import from there.</p>
<pre class="r"><code># Removed col names type for now and went with automatic column parsing

citibike_import = function(file) {
  
  df = read_csv(file, col_names = TRUE) %&gt;%
    janitor::clean_names() %&gt;% 
    separate(start_time, into = c(&quot;start_date&quot;, &quot;start_time&quot;), sep = &quot; &quot;) %&gt;% 
    separate(stop_time, into = c(&quot;stop_date&quot;, &quot;stop_time&quot;), sep = &quot; &quot;) %&gt;% 
    separate(start_date, into = c(&quot;start_year&quot;, &quot;start_month&quot;, &quot;start_day&quot;), sep = &quot;-&quot;) %&gt;% 
    separate(stop_date, into = c(&quot;stop_year&quot;, &quot;stop_month&quot;, &quot;stop_day&quot;), sep = &quot;-&quot;) %&gt;% 
    mutate(user_type = tolower(user_type),
           gender = as.factor(gender - 1),
           start_month = ifelse(start_month == &quot;01&quot;, &quot;January&quot;, &quot;March&quot;),
           stop_month = ifelse(start_month == &quot;01&quot;, &quot;January&quot;, &quot;March&quot;),
           trip_minutes = (trip_duration / 60),
           rider_age = (2017 - birth_year),
           start_hour = as.numeric(str_sub(start_time, 0, 2)),
           overnight = ifelse(start_hour &lt; 06 &amp; start_hour &gt;= 00, 1, 0),
           morning = ifelse(start_hour &lt; 12 &amp; start_hour &gt;= 06, 1, 0),
           afternoon = ifelse(start_hour &lt; 18 &amp; start_hour &gt;= 12, 1, 0),
           night = ifelse(start_hour &lt;= 24 &amp; start_hour &gt;= 18, 1, 0)) %&gt;% 
    filter(user_type == &quot;subscriber&quot;,
           trip_minutes &gt; 5,
           trip_minutes &lt;= 45,
           !start_station_name %in% c(&quot;Bressler&quot;, &quot;Kiosk in a box Motivate&quot;, &quot;NYCBS Depot - FAR&quot;, &quot;NYCBS Depot - SSP&quot;, &quot;NYCBS Depot - STY&quot;, &quot;NYCBS Depot - DYR&quot;, &quot;NYCBS Depot BAL - DYR&quot;, &quot;SSP Tech Workshop&quot;, &quot;Penn Station Valet&quot;, &quot;Penn Station Valet - Valet Scan&quot;),
           !end_station_name %in% c(&quot;Bressler&quot;, &quot;Kiosk in a box Motivate&quot;, &quot;NYCBS Depot - FAR&quot;, &quot;NYCBS Depot - SSP&quot;, &quot;NYCBS Depot - STY&quot;, &quot;NYCBS Depot - DYR&quot;, &quot;NYCBS Depot BAL - DYR&quot;, &quot;SSP Tech Workshop&quot;, &quot;Penn Station Valet&quot;, &quot;Penn Station Valet - Valet Scan&quot;),
           gender != -1,
           rider_age &lt; 100)
  
  df
  
}

citibike_tidy = 
  bind_rows(citibike_import(&quot;./data/201701-citibike-tripdata.csv.zip&quot;),
            citibike_import(&quot;./data/201703-citibike-tripdata.csv.zip&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   `Trip Duration` = col_integer(),
##   `Start Time` = col_datetime(format = &quot;&quot;),
##   `Stop Time` = col_datetime(format = &quot;&quot;),
##   `Start Station ID` = col_integer(),
##   `Start Station Name` = col_character(),
##   `Start Station Latitude` = col_double(),
##   `Start Station Longitude` = col_double(),
##   `End Station ID` = col_integer(),
##   `End Station Name` = col_character(),
##   `End Station Latitude` = col_double(),
##   `End Station Longitude` = col_double(),
##   `Bike ID` = col_integer(),
##   `User Type` = col_character(),
##   `Birth Year` = col_integer(),
##   Gender = col_integer()
## )
## Parsed with column specification:
## cols(
##   `Trip Duration` = col_integer(),
##   `Start Time` = col_datetime(format = &quot;&quot;),
##   `Stop Time` = col_datetime(format = &quot;&quot;),
##   `Start Station ID` = col_integer(),
##   `Start Station Name` = col_character(),
##   `Start Station Latitude` = col_double(),
##   `Start Station Longitude` = col_double(),
##   `End Station ID` = col_integer(),
##   `End Station Name` = col_character(),
##   `End Station Latitude` = col_double(),
##   `End Station Longitude` = col_double(),
##   `Bike ID` = col_integer(),
##   `User Type` = col_character(),
##   `Birth Year` = col_integer(),
##   Gender = col_integer()
## )</code></pre>
<pre class="r"><code># Reading the data directly from website doesn&#39;t work - thousands of parsing failures, both with auto parsing and when specifing column parsing in function
# citibike_import(&quot;https://s3.amazonaws.com/tripdata/201701-citibike-tripdata.csv.zip&quot;),
# citibike_import(&quot;https://s3.amazonaws.com/tripdata/201703-citibike-tripdata.csv.zip&quot;))</code></pre>
<hr />
</div>
<div id="exploratory-analysis" class="section level2">
<h2>Exploratory Analysis</h2>
<div id="most-popularused-beginning-station-and-least" class="section level3">
<h3>Most popular/used beginning station (and least)</h3>
<pre class="r"><code># Top 10 starting stations in the month of January

citibike_tidy %&gt;% 
  filter(start_month == &quot;January&quot;) %&gt;% 
  group_by(start_station_id, start_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(10, n) %&gt;% 
  arrange(desc(n)) %&gt;% 
  mutate(n = format(n, big.mark=&quot;,&quot;)) %&gt;%
  select(-start_station_id) %&gt;% 
  rename(&quot;Starting CitiBike Station (Address)&quot; = start_station_name,
         &quot;Times used in January 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Starting CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in January 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Pershing Square North
</td>
<td style="text-align:center;">
7,683
</td>
</tr>
<tr>
<td style="text-align:center;">
W 21 St &amp; 6 Ave
</td>
<td style="text-align:center;">
4,029
</td>
</tr>
<tr>
<td style="text-align:center;">
8 Ave &amp; W 33 St
</td>
<td style="text-align:center;">
4,028
</td>
</tr>
<tr>
<td style="text-align:center;">
E 17 St &amp; Broadway
</td>
<td style="text-align:center;">
3,880
</td>
</tr>
<tr>
<td style="text-align:center;">
Broadway &amp; E 22 St
</td>
<td style="text-align:center;">
3,813
</td>
</tr>
<tr>
<td style="text-align:center;">
W 41 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,754
</td>
</tr>
<tr>
<td style="text-align:center;">
W 31 St &amp; 7 Ave
</td>
<td style="text-align:center;">
3,506
</td>
</tr>
<tr>
<td style="text-align:center;">
W 38 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,465
</td>
</tr>
<tr>
<td style="text-align:center;">
8 Ave &amp; W 31 St
</td>
<td style="text-align:center;">
3,298
</td>
</tr>
<tr>
<td style="text-align:center;">
W 20 St &amp; 11 Ave
</td>
<td style="text-align:center;">
3,297
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Top 10 starting stations in the month of March

citibike_tidy %&gt;% 
  filter(start_month == &quot;March&quot;) %&gt;% 
  group_by(start_station_id, start_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(10, n) %&gt;% 
  arrange(desc(n)) %&gt;%
  mutate(n = format(n, big.mark=&quot;,&quot;)) %&gt;%
  select(-start_station_id) %&gt;% 
  rename(&quot;Starting CitiBike Station (Address)&quot; = start_station_name,
         &quot;Times used in March 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Starting CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in March 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Pershing Square North
</td>
<td style="text-align:center;">
8,081
</td>
</tr>
<tr>
<td style="text-align:center;">
W 33 St &amp; 7 Ave
</td>
<td style="text-align:center;">
4,553
</td>
</tr>
<tr>
<td style="text-align:center;">
E 17 St &amp; Broadway
</td>
<td style="text-align:center;">
4,212
</td>
</tr>
<tr>
<td style="text-align:center;">
Broadway &amp; E 22 St
</td>
<td style="text-align:center;">
4,102
</td>
</tr>
<tr>
<td style="text-align:center;">
W 21 St &amp; 6 Ave
</td>
<td style="text-align:center;">
3,983
</td>
</tr>
<tr>
<td style="text-align:center;">
8 Ave &amp; W 33 St
</td>
<td style="text-align:center;">
3,936
</td>
</tr>
<tr>
<td style="text-align:center;">
E 47 St &amp; Park Ave
</td>
<td style="text-align:center;">
3,819
</td>
</tr>
<tr>
<td style="text-align:center;">
W 52 St &amp; 5 Ave
</td>
<td style="text-align:center;">
3,765
</td>
</tr>
<tr>
<td style="text-align:center;">
W 31 St &amp; 7 Ave
</td>
<td style="text-align:center;">
3,755
</td>
</tr>
<tr>
<td style="text-align:center;">
W 41 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,748
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Bottom 10 starting stations in the month of January

citibike_tidy %&gt;% 
  filter(start_month == &quot;January&quot;) %&gt;% 
  group_by(start_station_id, start_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(-10, n) %&gt;% 
  arrange(n) %&gt;% 
  select(-start_station_id) %&gt;% 
  rename(&quot;Starting CitiBike Station (Address)&quot; = start_station_name,
         &quot;Times used in January 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Starting CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in January 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Henry St &amp; Bay St
</td>
<td style="text-align:center;">
18
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; W 9 St
</td>
<td style="text-align:center;">
25
</td>
</tr>
<tr>
<td style="text-align:center;">
Sigourney St &amp; Columbia St
</td>
<td style="text-align:center;">
33
</td>
</tr>
<tr>
<td style="text-align:center;">
Clinton St &amp; Centre St
</td>
<td style="text-align:center;">
36
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; Lorraine St
</td>
<td style="text-align:center;">
37
</td>
</tr>
<tr>
<td style="text-align:center;">
Henry St &amp; W 9 St
</td>
<td style="text-align:center;">
39
</td>
</tr>
<tr>
<td style="text-align:center;">
9 St &amp; 44 Rd
</td>
<td style="text-align:center;">
45
</td>
</tr>
<tr>
<td style="text-align:center;">
Richards St &amp; Delavan St
</td>
<td style="text-align:center;">
50
</td>
</tr>
<tr>
<td style="text-align:center;">
Brooklyn Bridge Park - Pier 2
</td>
<td style="text-align:center;">
51
</td>
</tr>
<tr>
<td style="text-align:center;">
Railroad Ave &amp; Kay Ave
</td>
<td style="text-align:center;">
52
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Bottom 10 starting stations in the month of March

citibike_tidy %&gt;% 
  filter(start_month == &quot;March&quot;) %&gt;% 
  group_by(start_station_id, start_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(-10, n) %&gt;% 
  arrange(n) %&gt;% 
  select(-start_station_id) %&gt;% 
  rename(&quot;Starting CitiBike Station (Address)&quot; = start_station_name,
         &quot;Times used in March 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Starting CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in March 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
3 Ave &amp; Schermerhorn St
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
Jackson St &amp; Leonard St
</td>
<td style="text-align:center;">
14
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; W 9 St
</td>
<td style="text-align:center;">
15
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; Lorraine St
</td>
<td style="text-align:center;">
20
</td>
</tr>
<tr>
<td style="text-align:center;">
10 Hudson Yards
</td>
<td style="text-align:center;">
21
</td>
</tr>
<tr>
<td style="text-align:center;">
Dwight St &amp; Van Dyke St
</td>
<td style="text-align:center;">
23
</td>
</tr>
<tr>
<td style="text-align:center;">
Henry St &amp; Bay St
</td>
<td style="text-align:center;">
24
</td>
</tr>
<tr>
<td style="text-align:center;">
W 13 St &amp; 7 Ave
</td>
<td style="text-align:center;">
31
</td>
</tr>
<tr>
<td style="text-align:center;">
9 St &amp; 44 Rd
</td>
<td style="text-align:center;">
35
</td>
</tr>
<tr>
<td style="text-align:center;">
Clinton St &amp; Centre St
</td>
<td style="text-align:center;">
47
</td>
</tr>
</tbody>
</table>
</div>
<div id="most-popularused-ending-station-and-least" class="section level3">
<h3>Most popular/used ending station (and least)</h3>
<pre class="r"><code># Top 10 terminal stations in the month of January

citibike_tidy %&gt;% 
  filter(start_month == &quot;January&quot;) %&gt;% 
  group_by(end_station_id, end_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(10, n) %&gt;% 
  arrange(desc(n)) %&gt;% 
  mutate(n = format(n, big.mark=&quot;,&quot;)) %&gt;%
  select(-end_station_id) %&gt;% 
  rename(&quot;Terminal CitiBike Station (Address)&quot; = end_station_name,
         &quot;Times used in January 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Terminal CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in January 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Pershing Square North
</td>
<td style="text-align:center;">
7,744
</td>
</tr>
<tr>
<td style="text-align:center;">
Broadway &amp; E 22 St
</td>
<td style="text-align:center;">
4,722
</td>
</tr>
<tr>
<td style="text-align:center;">
E 17 St &amp; Broadway
</td>
<td style="text-align:center;">
4,272
</td>
</tr>
<tr>
<td style="text-align:center;">
W 21 St &amp; 6 Ave
</td>
<td style="text-align:center;">
4,146
</td>
</tr>
<tr>
<td style="text-align:center;">
8 Ave &amp; W 33 St
</td>
<td style="text-align:center;">
4,143
</td>
</tr>
<tr>
<td style="text-align:center;">
W 52 St &amp; 5 Ave
</td>
<td style="text-align:center;">
3,866
</td>
</tr>
<tr>
<td style="text-align:center;">
W 41 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,765
</td>
</tr>
<tr>
<td style="text-align:center;">
W 31 St &amp; 7 Ave
</td>
<td style="text-align:center;">
3,614
</td>
</tr>
<tr>
<td style="text-align:center;">
W 38 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,453
</td>
</tr>
<tr>
<td style="text-align:center;">
W 20 St &amp; 11 Ave
</td>
<td style="text-align:center;">
3,413
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Top 10 terminal stations in the month of March

citibike_tidy %&gt;% 
  filter(start_month == &quot;March&quot;) %&gt;% 
  group_by(end_station_id, end_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(10, n) %&gt;% 
  arrange(desc(n)) %&gt;% 
  mutate(n = format(n, big.mark=&quot;,&quot;)) %&gt;%
  select(-end_station_id) %&gt;% 
  rename(&quot;Terminal CitiBike Station (Address)&quot; = end_station_name,
         &quot;Times used in March 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Terminal CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in March 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Pershing Square North
</td>
<td style="text-align:center;">
7,971
</td>
</tr>
<tr>
<td style="text-align:center;">
W 33 St &amp; 7 Ave
</td>
<td style="text-align:center;">
5,482
</td>
</tr>
<tr>
<td style="text-align:center;">
Broadway &amp; E 22 St
</td>
<td style="text-align:center;">
4,504
</td>
</tr>
<tr>
<td style="text-align:center;">
E 17 St &amp; Broadway
</td>
<td style="text-align:center;">
4,455
</td>
</tr>
<tr>
<td style="text-align:center;">
W 21 St &amp; 6 Ave
</td>
<td style="text-align:center;">
4,042
</td>
</tr>
<tr>
<td style="text-align:center;">
W 52 St &amp; 5 Ave
</td>
<td style="text-align:center;">
3,837
</td>
</tr>
<tr>
<td style="text-align:center;">
8 Ave &amp; W 33 St
</td>
<td style="text-align:center;">
3,803
</td>
</tr>
<tr>
<td style="text-align:center;">
W 41 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,735
</td>
</tr>
<tr>
<td style="text-align:center;">
E 47 St &amp; Park Ave
</td>
<td style="text-align:center;">
3,710
</td>
</tr>
<tr>
<td style="text-align:center;">
W 38 St &amp; 8 Ave
</td>
<td style="text-align:center;">
3,580
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Bottom 10 terminal stations in the month of January

citibike_tidy %&gt;% 
  filter(start_month == &quot;January&quot;) %&gt;% 
  group_by(end_station_id, end_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(-10, n) %&gt;% 
  arrange(n) %&gt;% 
  select(-end_station_id) %&gt;% 
  rename(&quot;Terminal CitiBike Station (Address)&quot; = end_station_name,
         &quot;Times used in January 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Terminal CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in January 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Exchange Place
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
E 71 St &amp; 1 Ave
</td>
<td style="text-align:center;">
2
</td>
</tr>
<tr>
<td style="text-align:center;">
Henry St &amp; Bay St
</td>
<td style="text-align:center;">
21
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; W 9 St
</td>
<td style="text-align:center;">
21
</td>
</tr>
<tr>
<td style="text-align:center;">
Henry St &amp; W 9 St
</td>
<td style="text-align:center;">
27
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbus Ave &amp; W 103 St
</td>
<td style="text-align:center;">
30
</td>
</tr>
<tr>
<td style="text-align:center;">
Division Ave &amp; Marcy Ave
</td>
<td style="text-align:center;">
39
</td>
</tr>
<tr>
<td style="text-align:center;">
Clinton St &amp; Centre St
</td>
<td style="text-align:center;">
40
</td>
</tr>
<tr>
<td style="text-align:center;">
Sigourney St &amp; Columbia St
</td>
<td style="text-align:center;">
44
</td>
</tr>
<tr>
<td style="text-align:center;">
Richards St &amp; Delavan St
</td>
<td style="text-align:center;">
46
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Bottom 10 terminal stations in the month of March

citibike_tidy %&gt;% 
  filter(start_month == &quot;March&quot;) %&gt;% 
  group_by(end_station_id, end_station_name) %&gt;% 
  summarize(n = n()) %&gt;% 
  ungroup() %&gt;% 
  top_n(-10, n) %&gt;% 
  arrange(n) %&gt;% 
  select(-end_station_id) %&gt;% 
  rename(&quot;Terminal CitiBike Station (Address)&quot; = end_station_name,
         &quot;Times used in March 2017 (n)&quot; = n) %&gt;% 
  knitr::kable(align = &quot;c&quot;) %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Terminal CitiBike Station (Address)
</th>
<th style="text-align:center;">
Times used in March 2017 (n)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Essex Light Rail
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
3 Ave &amp; Schermerhorn St
</td>
<td style="text-align:center;">
2
</td>
</tr>
<tr>
<td style="text-align:center;">
Morris Canal
</td>
<td style="text-align:center;">
5
</td>
</tr>
<tr>
<td style="text-align:center;">
Jackson St &amp; Leonard St
</td>
<td style="text-align:center;">
10
</td>
</tr>
<tr>
<td style="text-align:center;">
10 Hudson Yards
</td>
<td style="text-align:center;">
18
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; W 9 St
</td>
<td style="text-align:center;">
21
</td>
</tr>
<tr>
<td style="text-align:center;">
Columbia St &amp; Lorraine St
</td>
<td style="text-align:center;">
22
</td>
</tr>
<tr>
<td style="text-align:center;">
Henry St &amp; Bay St
</td>
<td style="text-align:center;">
33
</td>
</tr>
<tr>
<td style="text-align:center;">
W 13 St &amp; 7 Ave
</td>
<td style="text-align:center;">
34
</td>
</tr>
<tr>
<td style="text-align:center;">
Dwight St &amp; Van Dyke St
</td>
<td style="text-align:center;">
34
</td>
</tr>
</tbody>
</table>
</div>
</div>

&nbsp;
<hr />

<p style="text-align: center; font-size: 75%">A work by <a href="https://github.com/ericdavidmorris/">Eric Morris</a>, <a href="https://github.com/gswliu/">Grace Liu</a>, & <a href="https://github.com/tatinimalsarkar/">Tatini Mal-Sakar</a></p>
<p style="text-align: center; font-size: 75%"><span style="color: #808080;">Data obtained from <a href="https://www.citibikenyc.com/system-data">Citi Bikes</a></span></p>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
&nbsp;


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
